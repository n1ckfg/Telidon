<!DOCTYPE html>
<html>
	
	<head>
		<script src="../../../js/libraries/p5js/p5.min.js"></script>
		<script src="../../../js/libraries/p5js/p5.svg.js"></script>
		<script src="../../../js/telidon/naplps.js"></script>
	</head>

	<body>
		<script>
			"use strict";

			let ps, paths;
			let input = [];

			function preload() {
				ps = loadSVG("test.svg");
			}

			function setup() {
				createCanvas(400, 400, SVG);
				background(63);
				image(ps, 0, 0, width, height);
			    paths = querySVG('polygon');

			    for (let path of paths) {
			    	let points = [];
			    	let color = new Vector3(255, 255, 255);
			    	let isFill = false;
			    	let pointsRaw = path.attribute("points").split(" ");
			    	for (let pointRaw of pointsRaw) {
			    		let pointRawArray = pointRaw.split(",");
			    		let point = new Vector2(float(pointRawArray[0]), float(pointRawArray[1]));
			    		points.push(point);
			    	}
					
					const stroke = new NapInputWrapper(color, points, isFill);
					input.push(stroke);
			    }

				const encoder = new NapEncoder(input, 1);

				document.body.appendChild(document.createElement("br"));
				document.body.appendChild(document.createElement("br"));
				const div = document.createElement("div");
				document.body.appendChild(div);
				div.innerHTML = encoder.napRaw;				
			}
		</script>
	</body>

</html>